# プロジェクトロードマップ

このロードマップは、`sleep-smart-air-conditioner` プロジェクトの開発計画を定義します。アジャイル開発のアプローチを採用し、フェーズごとに明確な目標を設定して段階的に機能開発を進めます。

---

## フェーズ 0: 開発基盤とデータ収集・可視化基盤の構築

**目標:** プロジェクトの基盤となる開発環境を整備し、最初の価値提供として「睡眠と環境データの相関の可視化」を実現する。このフェーズで機械学習モデルの学習に不可欠なデータを蓄積開始する。

### スプリント 0: 開発環境とIaCのセットアップ
- [ ] **タスク:** AWS CDK (TypeScript) を用いたIaC（Infrastructure as Code）環境の構築
- [ ] **タスク:** GitHub Actionsを利用したCIパイプラインの初期設定（Lint, テスト）
- [ ] **タスク:** `docs/development_setup.md` に開発環境のセットアップ手順を文書化

### スプリント 1: 環境データの自動収集
- [ ] **タスク:** SwitchBot APIから温度、湿度、照度を取得するLambda関数を作成
- [ ] **タスク:** 取得したデータを保存するためのDynamoDBテーブルを設計・構築
- [ ] **タスク:** EventBridge (Scheduler) を使用して、Lambda関数を定期実行する設定


---

## フェーズ 1: MVP - 機械学習モデルによるエアコン自動制御

**目標:** 収集したデータを用いて睡眠の質を最大化するエアコン設定を予測する機械学習モデルを構築し、実際にエアコンを自動制御するMinimum Viable Product (MVP) を完成させる。

### スプリント 3: モデル開発と学習
- [ ] **タスク:** DynamoDBからS3へデータをエクスポートし、学習データセットを準備するETL処理を実装
- [ ] **タスク:** AWS SageMaker Studio Lab (またはローカル環境) で、収集データを用いたモデルの探索と学習を実施
    - **検討事項:** まずは「最適な設定温度」を予測する回帰モデルから着手
- [ ] **タスク:** 学習済みモデルを保存し、推論に利用できる形式でパッケージング

### スプリント 4: 推論APIとエアコン制御
- [ ] **タスク:** 学習済みモデルをデプロイし、推論リクエストを受け付けるLambda関数（推論API）を作成
- [ ] **タスク:** 就寝前にフロントエンドから推論APIを呼び出し、推奨されるエアコン設定を取得する機能を実装
- [ ] **タスク:** SwitchBot API経由でエアコンを実際に操作（ON/OFF, 温度設定）するLambda関数を作成・連携

---

## フェーズ 2: 機能拡張と最適化

**目標:** MVPの機能をベースに、より高度なデータ連携や省エネ、ユーザー体験の向上を目指す。

### バックログ (着手順は未定)
- [ ] **機能追加:** Health Auto Export / AutoSleep と連携し、より詳細な睡眠指標（睡眠時間、深い睡眠の割合など）を特徴量に追加
- [ ] **機能追加:** SwitchBot Plug Miniの電力消費量データを学習に加え、快適性と省エネルギーを両立するモデルへ改善
- [ ] **モデル改善:** 強化学習（A/Bテストなど簡易なものから）を導入し、ユーザーからのフィードバックを元に継続的にモデルをパーソナライズ
- [ ] **UX改善:** ユーザーごとの設定プロファイル機能
- [ ] **技術改善:** TDD/DDDプラクティスの導入検討
- [ ] **技術改善:** 処理の複雑化に応じて、一部機能をコンテナ（Fargate/ECS）へ移行することを検討
- [ ] **将来構想:** Raspberry Piと追加センサー（CO2濃度など）を導入したエッジコンピューティングによる精度向上

---